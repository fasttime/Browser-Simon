(function(){function y(d,e){Object.keys(e).forEach(function(f){var k=Object.getOwnPropertyDescriptor(e,f);"value"in k?(k=k.value,f in d&&"object"===typeof k?y(d[f],k):d[f]=k):Object.defineProperty(d,f,k)})}function I(d,e,f,k){return function(l){function q(r){l[k](r,e,f)}Array.isArray(d)?d.forEach(q):q(d)}}function z(d){if(!t){var e=m("STYLE");m(document.head,e);t=e.sheet}t.insertRule(d,t.cssRules.length)}function u(d,e){return Object.keys(d).map(function(f){return e(f,d[f])})}function g(d,e){e=u(e,
function(f,k){return f+":"+k});return d+"{"+e.join(";")+"}"}var m=window.o=function(d){var e=d instanceof Node?d:"function"===typeof d?d.call(m):document.createElement(d);for(var f=arguments.length,k=0;++k<f;){var l=arguments[k];if(l instanceof Node)e.appendChild(l);else if(null!=l){var q=typeof l;"object"===q?y(e,l):"function"===q?l.call(m,e):e.appendChild(document.createTextNode(l))}}return e};m.b=function(d,e){return I(d,e,void 0,"addEventListener")};m.a=function(d,e){d=g(d,e);z(d)};m.a.s=function(){if(CSSRule.u)var d=
"@";else if(CSSRule.v)d="@-webkit-";else return function(){return!1};d+="keyframes ";return function(e,f){f=u(f,g);z(d+e+"{"+f.join("")+"}");return!0}}();var t})();
(function(){function y(){do C=C+1&2147483647||1;while(r.has(C));return C}function I(a,b,h){var n=y();r.set(n,{l:a,once:!1});a={};D.postMessage((a.action="REPAEAT",a.id=n,a.delay=b,a.interval=h,a));return n}function z(a,b){var h=y();r.set(h,{l:a,once:!0});a={};D.postMessage((a.action="START",a.id=h,a.delay=b,a));return h}function u(a){if(r.delete(a)){var b={};D.postMessage((b.action="STOP",b.id=a,b))}}function g(a){this.i=a;J.add(this)}function m(a){E&&E.c();var b=F.createOscillator();b.connect(F.destination);
b.frequency.value=a;b.type="square";b.start();E=g.create(function(){b.disconnect();E=null});return b}function t(){m(42);l(!1,"Game over","#A33");g.create(g.h).m(1500)}function d(){A&&(A.c(),v<w.length?q():k())}function e(a){if(M&&!A){g.h();var b=this.classList;b.add("down");"mousedown"===a.type&&b.add("smooth");if(this===w[v++]){var h=m(this.dataset.frequency);A=g.create(function(){b.remove("down","smooth");h.stop(F.currentTime+.2);A=null})}else g.create(function(){b.remove("down")}),t()}a.preventDefault()}
function f(){g.h();w=[];k()}function k(){v=0;l(!1,"Look","");w.push(B.children[4*Math.random()^0]);var a=w.length;K.textContent=a;var b=13<a?270:5<a?370:470,h=I(function(){if(v<a){var p=w[v++];m(p.dataset.frequency).stop(F.currentTime+(b-50)/1E3);var x=p.classList;x.add("lit");g.create(function(){x.remove("lit")}).m(b-100)}else n.c()},800,b),n=g.create(function(){u(h);v=0;q();l(!0,"Play","")})}function l(a,b,h){M=a;B.classList.toggle("ready",a);G.textContent=b;G.style.color=h}function q(){var a=z(function(){a=
void 0;var b=w[v].classList;b.add("lit");g.create(function(){b.remove("lit")});t()},3E3);g.create(function(){u(a)})}var r=new Map,C,Q=URL.createObjectURL(new Blob(['let idMap=new Map;onmessage=event=>{let notify=()=>postMessage({id});let startDelay=callback=>idMap.set(id,setTimeout(()=>{callback();notify()},data.delay));let{data}=event,id=data.id;switch(data.action){case"START":startDelay(()=>idMap.delete(id));break;case"REPAEAT":startDelay(()=>idMap.set(id,setInterval(notify,data.interval)));break;case"STOP":let nativeId=idMap.get(id);idMap.delete(id);clearTimeout(nativeId);break;}}']));
var D=new Worker(Q);D.onmessage=function(a){a=a.data.id;var b=r.get(a);if(b){var h=b.l;b.once&&r.delete(a);h()}};var J=new Set;g.create=function(a){return new g(a)};g.h=function(){J.forEach(function(a){a.c()})};g.prototype.c=function(){var a=this.i;a&&(u(this.j),delete this.j,this.i=void 0,J.delete(this),a())};g.prototype.m=function(a){var b=this;b.i&&(u(b.j),b.j=z(function(){b.c()},a))};var F=new (window.AudioContext||window.webkitAudioContext),E=null,c=window.o,K,G,B,M=!1,A=null,v,w;c(document,
c.b("DOMContentLoaded",function(){document.title="Browser Simon";c(document.head,c("META",{content:"user-scalable=no, width=device-width",name:"viewport"}));c(document.documentElement,c.b("mouseup",d),c.b("touchend",d));var a=c("H1",{style:{font:"bold 28px/100% Georgia",margin:"28px 0",textAlign:"center"}},c("SPAN",{style:{color:"#49F",letterSpacing:"1px"}},"BROWSER"),c("BR"),c("SPAN",{style:{fontSize:"150%"}},"s\u0131mon"));B=c("DIV");var b=c("DIV",{style:{position:"relative",width:"300px",height:"300px"}},
B);c.a(".tile",{"box-shadow":"5px 5px 2.5px #ABABAB",position:"absolute",width:"145px",height:"145px"});c.a(".down",{margin:"3px 0 0 3px"});c.a(".lit,.smooth",{transition:"background 120ms ease, box-shadow 120ms ease, margin 120ms ease"});c.a(".ready *",{cursor:"pointer"});var h={};[{name:"green",frequency:415.305,background:"#DBFFBD",f:"#9F4",g:"#67AB2E"},{name:"red",frequency:311.127,background:"#FFBDBD",f:"#F44",g:"#AB2E2E"},{name:"yellow",frequency:246.942,background:"#FFFFBD",f:"#FF4",g:"#ABAB2E"},
{name:"blue",frequency:207.652,background:"#BDDBFF",f:"#49F",g:"#2E67AB"}].forEach(function(p,x){var R=p.background,L=p.f,H=p.name,N=p.g;p=c("DIV",{className:"tile "+H,dataset:{frequency:p.frequency}},c.b("mousedown",e),c.b("touchstart",e),c.b("mouseout",d));var O=[0,0,0,0],P=x^x>>1;O[P]="145px";c.a("."+H,{background:R,"border-radius":O.join(" "),left:150*(x&1)+"px",top:150*(x>>1)+"px"});c.a(".down."+H,{background:L,"box-shadow":"2px 2px 2.5px "+N});c.a(".lit."+H,{background:L,"box-shadow":"5px 5px 2.5px "+
N});c(B,p);h[25*P+"%"]={color:L}});h["100%"]=h["0%"];c.a.s("start",h);var n=c("DIV",{className:"start"},"Start",c.b("click",f));n=c("DIV",{className:"startLayer"},{style:{background:"#888",borderWidth:"1px",position:"absolute",left:"100px",top:"100px",width:"100px",height:"100px"}},n);c(b,n);c.a(".start",{"align-items":"center",background:"#B0C4DE","border-width":"2px",color:"#434A54",cursor:"pointer",display:"flex",font:"bold 20px Verdana","justify-content":"center","letter-spacing":"1px",margin:"3px",
position:"fixed",width:"92px",height:"92px"});c.a(".start:active",{animation:"start 1.5s infinite","border-color":"#AAA #DDD #DDD #AAA"});c.a(".start,.startLayer",{"border-color":"#DDD #AAA #AAA #DDD","border-radius":"100%","border-style":"solid","box-sizing":"border-box"});K=c("SPAN","\u2014");G=c("H2",{style:{textAlign:"center"}},"Hello");n=c("FOOTER",{style:{display:"table",margin:"18px 0",tableLayout:"fixed",whiteSpace:"nowrap",width:"100%"}},c("H2",{style:{overflowX:"auto"}},"Round: ",K),G);
c.a("h2",{display:"table-cell",font:"24px Verdana"});c(document.body,{style:{color:"#33A",WebkitTapHighlightColor:"transparent",userSelect:"none",WebkitUserSelect:"none"}},c("DIV",{style:{cursor:"default",margin:"0 auto",width:"300px"}},a,b,n))}))})();
