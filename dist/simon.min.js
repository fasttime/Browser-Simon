(function(){function r(c,h){Object.keys(h).forEach(function(g){var b=Object.getOwnPropertyDescriptor(h,g);"value"in b?(b=b.value,g in c&&"object"===typeof b?r(c[g],b):c[g]=b):Object.defineProperty(c,g,b)})}function B(c,h,b,k){return function(g){function e(c){g[k](c,h,b)}Array.isArray(c)?c.forEach(e):e(c)}}function t(c){if(!f){var b=k("STYLE");k(document.head,b);f=b.sheet}f.insertRule(c,f.cssRules.length)}function l(c,b){return Object.keys(c).map(function(h){return b(h,c[h])})}function b(c,b){b=l(b,
function(b,c){return b+":"+c});return c+"{"+b.join(";")+"}"}var k=window.o=function(b){var c=b instanceof Node?b:"function"===typeof b?b.call(k):document.createElement(b);for(var g=arguments.length,f=0;++f<g;){var e=arguments[f];if(e instanceof Node)c.appendChild(e);else if(null!=e){var l=typeof e;"object"===l?r(c,e):"function"===l?e.call(k,c):c.appendChild(document.createTextNode(e))}}return c};k.b=function(b,h){return B(b,h,void 0,"addEventListener")};k.a=function(c,h){c=b(c,h);t(c)};k.a.s=function(){if(CSSRule.u)var c=
"@";else if(CSSRule.v)c="@-webkit-";else return function(){return!1};c+="keyframes ";return function(h,g){g=l(g,b);t(c+h+"{"+g.join("")+"}");return!0}}();var f})();
(function(){function r(){do w=w+1&2147483647||1;while(p.has(w));return w}function B(d,b,a){var q=r();p.set(q,{l:d,once:!1});d={};x.postMessage((d.action="REPAEAT",d.id=q,d.delay=b,d.interval=a,d));return q}function t(d,b){var a=r();p.set(a,{l:d,once:!0});d={};x.postMessage((d.action="START",d.id=a,d.delay=b,d));return a}function l(b){if(p.delete(b)){var d={};x.postMessage((d.action="STOP",d.id=b,d))}}function b(b){this.i=b;C.add(this)}function k(d){y&&y.c();var a=z.createOscillator();a.connect(z.destination);
a.frequency.value=d;a.type="square";a.start();y=b.create(function(){a.disconnect();y=null});return a}function f(){k(42);e(!1,"Game over","#A33");b.create(b.h).m(1500)}function c(){u&&(u.c(),m<n.length?F():E())}function h(a){if(G&&!u){b.h();var d=this.classList;d.add("down");"mousedown"===a.type&&d.add("smooth");if(this===n[m++]){var c=k(this.dataset.frequency);u=b.create(function(){d.remove("down","smooth");c.stop(z.currentTime+.2);u=null})}else b.create(function(){d.remove("down")}),f()}a.preventDefault()}
function g(){b.h();n=[];E()}function E(){m=0;e(!1,"Look","");n.push(v.children[4*Math.random()^0]);var a=n.length;D.textContent=a;var c=13<a?270:5<a?370:470,h=B(function(){if(m<a){var d=n[m++];k(d.dataset.frequency).stop(z.currentTime+(c-50)/1E3);var q=d.classList;q.add("lit");b.create(function(){q.remove("lit")}).m(c-100)}else g.c()},800,c),g=b.create(function(){l(h);m=0;F();e(!0,"Play","")})}function e(a,b,c){G=a;v.classList.toggle("ready",a);A.textContent=b;A.style.color=c}function F(){var a=t(function(){a=
void 0;var c=n[m].classList;c.add("lit");b.create(function(){c.remove("lit")});f()},3E3);b.create(function(){l(a)})}var p=new Map,w,H=URL.createObjectURL(new Blob(['let idMap=new Map;onmessage=event=>{let notify=()=>postMessage({id});let startDelay=callback=>idMap.set(id,setTimeout(()=>{callback();notify()},data.delay));let{data}=event,id=data.id;switch(data.action){case"START":startDelay(()=>idMap.delete(id));break;case"REPAEAT":startDelay(()=>idMap.set(id,setInterval(notify,data.interval)));break;case"STOP":let nativeId=idMap.get(id);idMap.delete(id);clearTimeout(nativeId);break;}}']));
var x=new Worker(H);x.onmessage=function(a){a=a.data.id;var b=p.get(a);if(b){var c=b.l;b.once&&p.delete(a);c()}};var C=new Set;b.create=function(a){return new b(a)};b.h=function(){C.forEach(function(a){a.c()})};b.prototype.c=function(){var a=this.i;a&&(l(this.j),delete this.j,this.i=void 0,C.delete(this),a())};b.prototype.m=function(a){var b=this;b.i&&(l(b.j),b.j=t(function(){b.c()},a))};var z=new (window.AudioContext||window.webkitAudioContext),y=null,a=window.o,D,A,v,G=!1,u=null,m,n;a(document,
a.b("DOMContentLoaded",function(){document.title="Browser Simon";a(document.head,a("META",{content:"user-scalable=no, width=device-width",name:"viewport"}));a(document.documentElement,a.b("mouseup",c),a.b("touchend",c));var b=a("H1",{style:{font:"bold 28px/100% Georgia",margin:"28px 0",textAlign:"center"}},a("SPAN",{style:{color:"#49F",letterSpacing:"1px"}},"BROWSER"),a("BR"),a("SPAN",{style:{fontSize:"150%"}},"s\u0131mon"));v=a("DIV");var e=a("DIV",{style:{position:"relative",width:"300px",height:"300px"}},
v);a.a(".tile",{"box-shadow":"5px 5px 2.5px #ABABAB",position:"absolute",width:"145px",height:"145px"});a.a(".down",{margin:"3px 0 0 3px"});a.a(".lit,.smooth",{transition:"background 120ms ease, box-shadow 120ms ease, margin 120ms ease"});a.a(".ready *",{cursor:"pointer"});var k={};[{name:"green",frequency:415.305,background:"#DBFFBD",f:"#9F4",g:"#67AB2E"},{name:"red",frequency:311.127,background:"#FFBDBD",f:"#F44",g:"#AB2E2E"},{name:"yellow",frequency:246.942,background:"#FFFFBD",f:"#FF4",g:"#ABAB2E"},
{name:"blue",frequency:207.652,background:"#BDDBFF",f:"#49F",g:"#2E67AB"}].forEach(function(b,d){var g=b.background,e=b.f,f=b.name,l=b.g;b=a("DIV",{className:"tile "+f,dataset:{frequency:b.frequency}},a.b("mousedown",h),a.b("touchstart",h),a.b("mouseout",c));var m=[0,0,0,0],n=d^d>>1;m[n]="145px";a.a("."+f,{background:g,"border-radius":m.join(" "),left:150*(d&1)+"px",top:150*(d>>1)+"px"});a.a(".down."+f,{background:e,"box-shadow":"2px 2px 2.5px "+l});a.a(".lit."+f,{background:e,"box-shadow":"5px 5px 2.5px "+
l});a(v,b);k[25*n+"%"]={color:e}});k["100%"]=k["0%"];a.a.s("start",k);var f=a("DIV",{className:"start"},"Start",a.b("click",g));f=a("DIV",{className:"startLayer"},{style:{background:"#888",borderWidth:"1px",position:"absolute",left:"100px",top:"100px",width:"100px",height:"100px"}},f);a(e,f);a.a(".start",{"align-items":"center",background:"#B0C4DE","border-width":"2px",color:"#434A54",cursor:"pointer",display:"flex",font:"bold 20px Verdana","justify-content":"center","letter-spacing":"1px",margin:"3px",
width:"92px",height:"92px"});a.a(".start:active",{animation:"start 1.5s infinite","border-color":"#AAA #DDD #DDD #AAA"});a.a(".start,.startLayer",{"border-color":"#DDD #AAA #AAA #DDD","border-radius":"100%","border-style":"solid","box-sizing":"border-box"});D=a("SPAN","\u2014");A=a("H2",{style:{textAlign:"center"}},"Hello");f=a("FOOTER",{style:{display:"table",margin:"18px 0",tableLayout:"fixed",whiteSpace:"nowrap",width:"100%"}},a("H2",{style:{overflowX:"auto"}},"Round: ",D),A);a.a("h2",{display:"table-cell",
font:"24px Verdana"});a(document.body,{style:{color:"#33A",WebkitTapHighlightColor:"transparent",userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none"}},a("DIV",{style:{cursor:"default",margin:"0 auto",width:"300px"}},b,e,f))}))})();
