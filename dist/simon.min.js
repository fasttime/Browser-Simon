(function(){function z(d,e){r.keys(e).forEach(function(f){var h=r.getOwnPropertyDescriptor(e,f);"value"in h?(h=h.value,f in d&&"object"===typeof h?z(d[f],h):d[f]=h):r.defineProperty(d,f,h)})}function I(d,e,f,h){return function(l){function m(y){l[h](y,e,f)}Array.isArray(d)?d.forEach(m):m(d)}}function A(d){if(!t){var e=p("STYLE");p(document.head,e);t=e.sheet}t.insertRule(d,t.cssRules.length)}function u(d,e){return r.keys(d).map(function(f){return e(f,d[f])})}function g(d,e){e=u(e,function(f,h){return f+
":"+h});return d+"{"+e.join(";")+"}"}var r=Object,p=window.o=function(d){var e=d instanceof Node?d:"function"===typeof d?d.call(p):document.createElement(d);for(var f=arguments.length,h=0;++h<f;){var l=arguments[h];if(l instanceof Node)e.appendChild(l);else if(null!=l){var m=typeof l;"object"===m?z(e,l):"function"===m?l.call(p,e):e.appendChild(document.createTextNode(l))}}return e};p.b=function(d,e){return I(d,e,void 0,"addEventListener")};p.a=function(d,e){d=g(d,e);A(d)};p.a.s=function(){if(CSSRule.u)var d=
"@";else if(CSSRule.v)d="@-webkit-";else return function(){return!1};d+="keyframes ";return function(e,f){f=u(f,g);A(d+e+"{"+f.join("")+"}");return!0}}();var t})();
(function(){function z(){do y=y+1&2147483647||1;while(m.has(y));return y}function I(a,b,k){var n=z();m.set(n,{l:a,once:!1});a={};D.postMessage((a.action="REPAEAT",a.id=n,a.delay=b,a.interval=k,a));return n}function A(a,b){var k=z();m.set(k,{l:a,once:!0});a={};D.postMessage((a.action="START",a.id=k,a.delay=b,a));return k}function u(a){if(m.delete(a)){var b={};D.postMessage((b.action="STOP",b.id=a,b))}}function g(a){this.i=a;J.add(this)}function r(a){E&&E.c();var b=F.createOscillator();b.connect(F.destination);
b.frequency.value=a;b.type="square";b.start();E=g.create(function(){b.disconnect();E=null});return b}function p(){r(42);h(!1,"Game over","#A33");g.create(g.h).m(1500)}function t(){B&&(B.c(),v<w.length?l():f())}function d(a){if(M&&!B){g.h();var b=this.classList;b.add("down");"mousedown"===a.type&&b.add("smooth");if(this===w[v++]){var k=r(this.dataset.frequency);B=g.create(function(){b.remove("down","smooth");k.stop(F.currentTime+.2);B=null})}else g.create(function(){b.remove("down")}),p()}a.preventDefault()}
function e(){g.h();w=[];f()}function f(){v=0;h(!1,"Look","");w.push(C.children[4*Math.random()^0]);var a=w.length;K.textContent=a;var b=13<a?270:5<a?370:470,k=I(function(){if(v<a){var q=w[v++];r(q.dataset.frequency).stop(F.currentTime+(b-50)/1E3);var x=q.classList;x.add("lit");g.create(function(){x.remove("lit")}).m(b-100)}else n.c()},800,b),n=g.create(function(){u(k);v=0;l();h(!0,"Play","")})}function h(a,b,k){M=a;C.classList.toggle("ready",a);G.textContent=b;G.style.color=k}function l(){var a=A(function(){a=
void 0;var b=w[v].classList;b.add("lit");g.create(function(){b.remove("lit")});p()},3E3);g.create(function(){u(a)})}var m=new Map,y,Q=URL.createObjectURL(new Blob(['let idMap=new Map;onmessage=event=>{let notify=()=>postMessage({id});let startDelay=callback=>idMap.set(id,setTimeout(()=>{callback();notify()},data.delay));let{data}=event,id=data.id;switch(data.action){case"START":startDelay(()=>idMap.delete(id));break;case"REPAEAT":startDelay(()=>idMap.set(id,setInterval(notify,data.interval)));break;case"STOP":let nativeId=idMap.get(id);idMap.delete(id);clearTimeout(nativeId);break;}}']));
var D=new Worker(Q);D.onmessage=function(a){a=a.data.id;var b=m.get(a);if(b){var k=b.l;b.once&&m.delete(a);k()}};var J=new Set;g.create=function(a){return new g(a)};g.h=function(){J.forEach(function(a){a.c()})};g.prototype.c=function(){var a=this.i;a&&(u(this.j),delete this.j,this.i=void 0,J.delete(this),a())};g.prototype.m=function(a){var b=this;b.i&&(u(b.j),b.j=A(function(){b.c()},a))};var F=new (window.AudioContext||window.webkitAudioContext),E=null,c=window.o,K,G,C,M=!1,B=null,v,w;c(document,
c.b("DOMContentLoaded",function(){document.title="Browser Simon";c(document.head,c("META",{content:"user-scalable=no, width=device-width",name:"viewport"}));c(document.documentElement,c.b("mouseup",t),c.b("touchend",t));var a=c("H1",{style:{font:"bold 28px/100% Georgia",margin:"28px 0",textAlign:"center"}},c("SPAN",{style:{color:"#49F",letterSpacing:"1px"}},"BROWSER"),c("BR"),c("SPAN",{style:{fontSize:"150%"}},"s\u0131mon"));C=c("DIV");var b=c("DIV",{style:{position:"relative",width:"300px",height:"300px"}},
C);c.a(".tile",{"box-shadow":"5px 5px 2.5px #ABABAB",position:"absolute",width:"145px",height:"145px"});c.a(".down",{margin:"3px 0 0 3px"});c.a(".lit,.smooth",{transition:"background 120ms ease, box-shadow 120ms ease, margin 120ms ease"});c.a(".ready *",{cursor:"pointer"});var k={};[{name:"green",frequency:415.305,background:"#DBFFBD",f:"#9F4",g:"#67AB2E"},{name:"red",frequency:311.127,background:"#FFBDBD",f:"#F44",g:"#AB2E2E"},{name:"yellow",frequency:246.942,background:"#FFFFBD",f:"#FF4",g:"#ABAB2E"},
{name:"blue",frequency:207.652,background:"#BDDBFF",f:"#49F",g:"#2E67AB"}].forEach(function(q,x){var R=q.background,L=q.f,H=q.name,N=q.g;q=c("DIV",{className:"tile "+H,dataset:{frequency:q.frequency}},c.b("mousedown",d),c.b("touchstart",d),c.b("mouseout",t));var O=[0,0,0,0],P=x^x>>1;O[P]="145px";c.a("."+H,{background:R,"border-radius":O.join(" "),left:150*(x&1)+"px",top:150*(x>>1)+"px"});c.a(".down."+H,{background:L,"box-shadow":"2px 2px 2.5px "+N});c.a(".lit."+H,{background:L,"box-shadow":"5px 5px 2.5px "+
N});c(C,q);k[25*P+"%"]={color:L}});k["100%"]=k["0%"];c.a.s("start",k);var n=c("DIV",{className:"start"},"Start",c.b("click",e));n=c("DIV",{className:"startLayer"},{style:{background:"#888",borderWidth:"1px",position:"absolute",left:"100px",top:"100px",width:"100px",height:"100px"}},n);c(b,n);c.a(".start",{"align-items":"center",background:"#B0C4DE","border-width":"2px",color:"#434A54",cursor:"pointer",display:"flex",font:"bold 20px Verdana","justify-content":"center","letter-spacing":"1px",margin:"3px",
position:"fixed",width:"92px",height:"92px"});c.a(".start:active",{animation:"start 1.5s infinite","border-color":"#AAA #DDD #DDD #AAA"});c.a(".start,.startLayer",{"border-color":"#DDD #AAA #AAA #DDD","border-radius":"100%","border-style":"solid","box-sizing":"border-box"});K=c("SPAN","\u2014");G=c("H2",{style:{textAlign:"center"}},"Hello");n=c("FOOTER",{style:{display:"table",margin:"18px 0",tableLayout:"fixed",whiteSpace:"nowrap",width:"100%"}},c("H2",{style:{overflowX:"auto"}},"Round: ",K),G);
c.a("h2",{display:"table-cell",font:"24px Verdana"});c(document.body,{style:{color:"#33A",WebkitTapHighlightColor:"transparent",userSelect:"none",WebkitUserSelect:"none"}},c("DIV",{style:{cursor:"default",margin:"0 auto",width:"300px"}},a,b,n))}))})();
